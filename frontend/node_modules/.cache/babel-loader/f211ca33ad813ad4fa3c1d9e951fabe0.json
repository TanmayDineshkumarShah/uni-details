{"ast":null,"code":"var _jsxFileName = \"/home/tanmay/WebDev/uni-details-app/frontend/src/components/ViewTable.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { forwardRef } from 'react'; //import Avatar from 'react-avatar';\n\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from \"material-table\";\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport axios from 'axios';\nimport Alert from '@material-ui/lab/Alert';\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(AddBox, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 35\n    }\n  }))),\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 37\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 37\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 38\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 43\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 36\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 38\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 38\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 41\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 40\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 40\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 44\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 43\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 38\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 41\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 47\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 42\n    }\n  })))\n};\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction ViewTablePage() {\n  var columns = [{\n    title: \"uid\",\n    field: \"uid\"\n  }, //{title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} />  },\n  {\n    title: \"name\",\n    field: \"uniname\"\n  }, {\n    title: \"reg_date\",\n    field: \"registration_date\"\n  }, {\n    title: \"exp_date\",\n    field: \"expiration_date\"\n  }, {\n    title: \"img_url\",\n    field: \"img_url\"\n  }, {\n    title: \"stud\",\n    field: \"no_of_students\"\n  }, {\n    title: \"email\",\n    field: \"email\"\n  }, {\n    title: \"web_url\",\n    field: \"web_url\"\n  }, {\n    title: \"contact\",\n    field: \"contact_no\"\n  }];\n  const [data, setData] = useState([]); //table data\n  //for error handling\n\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  useEffect(() => {\n    axios.get(\"/get-uni-details\").then(res => {\n      console.log(res);\n      setData(res.data);\n    }).catch(error => {\n      console.log(\"Error\");\n    });\n  }, []);\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (newData.first_name === \"\") {\n      errorList.push(\"Please enter first name\");\n    }\n\n    if (newData.last_name === \"\") {\n      errorList.push(\"Please enter last name\");\n    }\n\n    if (newData.email === \"\" || validateEmail(newData.email) === false) {\n      errorList.push(\"Please enter a valid email\");\n    }\n\n    if (errorList.length < 1) {\n      axios.post(\"/modify-uni-details\", newData).then(res => {\n        const dataUpdate = [...data];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setData([...dataUpdate]);\n        resolve();\n        setIserror(false);\n        setErrorMessages([]);\n      }).catch(error => {\n        setErrorMessages([\"Update failed! Server error\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  }; //   const handleRowAdd = (newData, resolve) => {\n  //     //validation\n  //     let errorList = []\n  //     if(newData.first_name === undefined){\n  //       errorList.push(\"Please enter first name\")\n  //     }\n  //     if(newData.last_name === undefined){\n  //       errorList.push(\"Please enter last name\")\n  //     }\n  //     if(newData.email === undefined || validateEmail(newData.email) === false){\n  //       errorList.push(\"Please enter a valid email\")\n  //     }\n  //     if(errorList.length < 1){ //no error\n  //       api.post(\"/users\", newData)\n  //       .then(res => {\n  //         let dataToAdd = [...data];\n  //         dataToAdd.push(newData);\n  //         setData(dataToAdd);\n  //         resolve()\n  //         setErrorMessages([])\n  //         setIserror(false)\n  //       })\n  //       .catch(error => {\n  //         setErrorMessages([\"Cannot add data. Server error!\"])\n  //         setIserror(true)\n  //         resolve()\n  //       })\n  //     }else{\n  //       setErrorMessages(errorList)\n  //       setIserror(true)\n  //       resolve()\n  //     }\n  //   }\n\n\n  const handleRowDelete = (oldData, resolve) => {\n    axios.post(\"/delete-uni-details\", oldData).then(res => {\n      const dataDelete = [...data];\n      const index = oldData.tableData.id;\n      dataDelete.splice(index, 1);\n      setData([...dataDelete]);\n      resolve();\n    }).catch(error => {\n      setErrorMessages([\"Delete failed! Server error\"]);\n      setIserror(true);\n      resolve();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, iserror && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }, errorMessages.map((msg, i) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 30\n      }\n    }, msg);\n  }))), /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"User data from remote source\",\n    columns: columns,\n    data: data,\n    icons: tableIcons,\n    options: {\n      actionsColumnIndex: -1\n    },\n    editable: {\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        handleRowUpdate(newData, oldData, resolve);\n      }),\n      // onRowAdd: (newData) =>\n      //   new Promise((resolve) => {\n      //     handleRowAdd(newData, resolve)\n      //   }),\n      onRowDelete: oldData => new Promise(resolve => {\n        handleRowDelete(oldData, resolve);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  })));\n}\n\nexport default ViewTablePage;","map":{"version":3,"sources":["/home/tanmay/WebDev/uni-details-app/frontend/src/components/ViewTable.jsx"],"names":["React","useState","useEffect","forwardRef","Grid","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","axios","Alert","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","validateEmail","email","re","test","String","toLowerCase","ViewTablePage","columns","title","field","data","setData","iserror","setIserror","errorMessages","setErrorMessages","get","then","res","console","log","catch","error","handleRowUpdate","newData","oldData","resolve","errorList","first_name","push","last_name","length","post","dataUpdate","index","tableData","id","handleRowDelete","dataDelete","splice","map","msg","i","actionsColumnIndex","onRowUpdate","Promise","onRowDelete"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { forwardRef } from 'react';\n//import Avatar from 'react-avatar';\nimport Grid from '@material-ui/core/Grid'\n\nimport MaterialTable from \"material-table\";\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport axios from 'axios'\nimport Alert from '@material-ui/lab/Alert';\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\n\n\n\nfunction validateEmail(email){\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction ViewTablePage() {\n\n  var columns = [\n    {title: \"uid\", field: \"uid\", },\n    //{title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} />  },\n    {title: \"name\", field: \"uniname\"},\n    {title: \"reg_date\", field: \"registration_date\"},\n    {title: \"exp_date\", field: \"expiration_date\"},\n    {title: \"img_url\", field: \"img_url\"},\n    {title: \"stud\", field: \"no_of_students\"},\n    {title: \"email\", field: \"email\"},\n    {title: \"web_url\", field: \"web_url\"},\n    {title: \"contact\", field: \"contact_no\"}\n    \n  ]\n  const [data, setData] = useState([]); //table data\n\n  //for error handling\n  const [iserror, setIserror] = useState(false)\n  const [errorMessages, setErrorMessages] = useState([])\n\n  useEffect(() => { \n    axios.get(\"/get-uni-details\")\n        .then(res => {\n            console.log(res);               \n            setData(res.data)\n         })\n         .catch(error=>{\n             console.log(\"Error\")\n         })\n  }, [])\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = []\n    if(newData.first_name === \"\"){\n      errorList.push(\"Please enter first name\")\n    }\n    if(newData.last_name === \"\"){\n      errorList.push(\"Please enter last name\")\n    }\n    if(newData.email === \"\" || validateEmail(newData.email) === false){\n      errorList.push(\"Please enter a valid email\")\n    }\n\n    if(errorList.length < 1){\n      axios.post(\"/modify-uni-details\", newData)\n      .then(res => {\n        const dataUpdate = [...data];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setData([...dataUpdate]);\n        resolve()\n        setIserror(false)\n        setErrorMessages([])\n      })\n      .catch(error => {\n        setErrorMessages([\"Update failed! Server error\"])\n        setIserror(true)\n        resolve()\n        \n      })\n    }else{\n      setErrorMessages(errorList)\n      setIserror(true)\n      resolve()\n\n    }\n    \n  }\n\n//   const handleRowAdd = (newData, resolve) => {\n//     //validation\n//     let errorList = []\n//     if(newData.first_name === undefined){\n//       errorList.push(\"Please enter first name\")\n//     }\n//     if(newData.last_name === undefined){\n//       errorList.push(\"Please enter last name\")\n//     }\n//     if(newData.email === undefined || validateEmail(newData.email) === false){\n//       errorList.push(\"Please enter a valid email\")\n//     }\n\n//     if(errorList.length < 1){ //no error\n//       api.post(\"/users\", newData)\n//       .then(res => {\n//         let dataToAdd = [...data];\n//         dataToAdd.push(newData);\n//         setData(dataToAdd);\n//         resolve()\n//         setErrorMessages([])\n//         setIserror(false)\n//       })\n//       .catch(error => {\n//         setErrorMessages([\"Cannot add data. Server error!\"])\n//         setIserror(true)\n//         resolve()\n//       })\n//     }else{\n//       setErrorMessages(errorList)\n//       setIserror(true)\n//       resolve()\n//     }\n\n    \n//   }\n\n  const handleRowDelete = (oldData, resolve) => {\n    \n    axios.post(\"/delete-uni-details\",oldData)\n      .then(res => {\n        const dataDelete = [...data];\n        const index = oldData.tableData.id;\n        dataDelete.splice(index, 1);\n        setData([...dataDelete]);\n        resolve()\n      })\n      .catch(error => {\n        setErrorMessages([\"Delete failed! Server error\"])\n        setIserror(true)\n        resolve()\n      })\n  }\n\n\n  return (\n    <div className=\"App\">\n      \n      <Grid container spacing={1}>\n          <Grid item xs={3}></Grid>\n          <Grid item xs={6}>\n          <div>\n            {iserror && \n              <Alert severity=\"error\">\n                  {errorMessages.map((msg, i) => {\n                      return <div key={i}>{msg}</div>\n                  })}\n              </Alert>\n            }       \n          </div>\n            <MaterialTable\n              title=\"User data from remote source\"\n              columns={columns}\n              data={data}\n              icons={tableIcons}\n              options={{actionsColumnIndex:-1}}\n              editable={{\n                onRowUpdate: (newData, oldData) =>\n                  new Promise((resolve) => {\n                      handleRowUpdate(newData, oldData, resolve);\n                      \n                  }),\n                // onRowAdd: (newData) =>\n                //   new Promise((resolve) => {\n                //     handleRowAdd(newData, resolve)\n                //   }),\n                onRowDelete: (oldData) =>\n                  new Promise((resolve) => {\n                    handleRowDelete(oldData, resolve)\n                  }),\n              }}\n            />\n          </Grid>\n          <Grid item xs={3}></Grid>\n        </Grid>\n    </div>\n  );\n}\n\nexport default ViewTablePage;"]},"metadata":{},"sourceType":"module"}